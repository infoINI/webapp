<!DOCTYPE html>

<html>
<head>
  <meta name="generator" content="HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">

  <title>infoINI-Status</title>
  <meta charset="utf-8"><!-- icons -->
  <link rel="shortcut icon" href="/media/favicon.ico">
  <link rel="apple-touch-icon" href="/media/logo.png" sizes="118x118">
  <link rel="apple-touch-icon" href="/media/logo_32.png" sizes="32x32">
  <link rel="apple-touch-icon" href="/media/logo.png">
  <link rel="apple-touch-icon-precomposed" href="/media/logo.png">
  <meta name="HandheldFriendly" content="true">
  <meta name="viewport" content="width=device-width, height=device-height, user-scalable=no"><!-- included style for faster loading -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="apple-touch-startup-image" href="/media/logo.png">
  <style type="text/css">
body, div, html,h1 {margin:0;padding:0; }
  * { font-family: Arial; color:#111; }
  body { background-color:#fff; padding-bottom:5em; }
  body, table { font-size:24px;}

  a { color: #00555f; text-decoration:none; text-shadow: 0.05em 0.05em 0.1em #aaa;}
  .footer p { font-size:0.5em;}

  /* logo             --------------------------------------------------- */
  #ini-logo {
        position: fixed;
        z-index: 100;
        top: 4px;
        right: 15px;
        height:2.2em;
  }
  #ini-logo img {
    max-width:100%;max-height:100%;
    box-shadow: 0 0 0.4em #666;
    border-radius: 0.2em;
  }

  /* navigation       --------------------------------------------------- */
  #nav {
    border-bottom:1px solid #aaa;
    width: 100%;
    position: fixed;
    top: 0;
    left: 0;
    background-color: #ddd;
    z-index: 100;
    text-shadow: 0.05em 0.05em 0.1em #aaa;
    box-shadow: 0 0 0.4em #666;
    /* http://www.colorzilla.com/gradient-editor/ */
    background: #ddd;
    background: -moz-linear-gradient(top, #ffffff 0%, #d6d6d6 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#d6d6d6));
    background: -webkit-linear-gradient(top, #ffffff 0%,#d6d6d6 100%);
    background: -o-linear-gradient(top, #ffffff 0%,#d6d6d6 100%);
    background: -ms-linear-gradient(top, #ffffff 0%,#d6d6d6 100%);
    background: linear-gradient(to bottom, #ffffff 0%,#d6d6d6 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#d6d6d6',GradientType=0 );
  }
  #nav a {
    display:inline-block;
    padding:0.2em;
    border-right:1px solid #aaa;
  }
  #nav a:hover, #nav a.current { background-color:#fff;}

  /* pages            --------------------------------------------------- */
  .header {}
  .content {padding:0.3em;}
  .header h1 {
    font-size:2em;
    text-shadow: 0.05em 0.05em 0.1em #aaa;
    margin-top:1em;
  }
  .header .up       { float:right;color:#aaa;}
  .header .up:hover { color: #00555f;}
  .page             { margin-bottom:1em; margin-top:1em; }
  .main             { border-top:1px solid #ccc; }
  .content          { padding:10px; }
  .row {
    border-bottom:1px solid #aaa;
    box-shadow: 0 0 0.4em #aaa;
    background-color:#d8d8d8;
  }
  .alt               { background-color:#e8e8e8;}
  .col               { width:50%;}
  .col.left          { float:left;}
  .col.left .content { border-right:1px solid #aaa;}
  .col.right         { float:right;}
  .clear             { clear:both;}

  /* members          --------------------------------------------------- */
  #page_members .main{ background-color:#d8d8d8;min-height:10em; }
  #page_vote .main{ background-color:#d8d8d8;min-height:10em; }
  .member_img {
          padding-right:0.2em;
          float:left;
  }
  .member_img img {
          height:5em;
          border-right:1px solid #999;
  }
  .member {
          height:5em;
          width:50%;
          float:left;
          font-size:0.9em;
          cursor:pointer;
  }

  .member_position, .member_comment, .member_mail, .member_course { color:#333;font-size:0.7em;font-style:italic;}
  .member_mail, .member_course {display:none;}

  .member.active { width:100%;font-size:1.4em; }
  .active .member_mail, .active .member_course {display:block;}
  .active .member_img img { }


  /* donate           --------------------------------------------------- */
  #page_donate table,
  #page_donate tr,
  #page_donate td, {padding:0;margin:0;}

  /* status           --------------------------------------------------- */
  #page_status .main { font-size:1.2em;}
  #page_status .frame_tuer { margin-top:1em;}
  #tuer              { text-align:center;}
  #tuer.open         { background-color:#0a0; }
  #tuer.closed       { background-color:#c00; }
  .cafe_bar { height:1.2em;position:relative;}
  .cafe_bar .text {
          position:absolute;
          left:0;top:0;
          text-align:center;
          right:0;
        z-index:4;
  }
  .cafe_bar .bar {
        width:0;
        background-color:#6F4E37;
        height:1.2em;
        z-index:3;
  }
  .qr_code { font-size:0.6em;}
  .qr_code img { width:100%;}

  /* stpeiseplan      --------------------------------------------------- */
  #speiseplan *{ background-color:transparent; border:0; }
  #speiseplan .mensa_day_speise_preis,
  #speiseplan .side_dishes,
  #speiseplan .mensa_additional_information,
  #speiseplan .zusatz {display:none;}
  #speiseplan .siegel {height:1em;}

  /* news             --------------------------------------------------- */
  #news h2 {padding:0;margin:0;}
  #news p {padding:0;margin:0;margin-bottom:0.6em;text-align:justify;}

  /* big displays     --------------------------------------------------- */
  @media only screen and (min-width: 1000px) and (max-width: 1499px) { 
        body, table { font-size:36px; }
        .page { margin:0 auto; width:1000px; }
        .main {
                overflow:hidden;
                -webkit-border-radius: 10px;
                -moz-border-radius: 10px;
                border-radius: 10px;
        }
  }
  /* hd-displays      --------------------------------------------------- */
  .hdOnly {display:none;}
  @media only screen and (min-width: 1500px) { 
        .hdOnly {display:inline;}

        /* base */
        body, table { font-size:40px; }
        body {margin-left:250px;}
        #nav   { padding-top:220px; width:250px;font-size:0.8em;bottom:0;z-index:1; }
        #nav a { display:block; border-top:1px solid #aaa;border-left:0;border-right:0;}
        #ini-logo {
            position: fixed;
            z-index: 100;
            top: 40px;
            left: 50px;
            height:auto;
        }
        .page {
            margin-left:1em;
            margin-right:0;
            margin-top:2em;
            width:auto;
            box-shadow: 0 0 0.4em #666;
        }
        .main {
            overflow:hidden;
            -webkit-border-radius: 0;
            -moz-border-radius: 0;
            border-radius: 0;
        }
        .header h1:nth-of-type(1) {margin-top:0; }

        /* status */
        #page_status {
            margin-left:0;
            margin-bottom:0;
            position:fixed;
            left:0;bottom:0;
            width:250px;
            font-size:0.5em;
            z-index:2;
            background-color:#eee;
            box-shadow: 0 0 0.4em #666;
        }

        #page_status .frame_tuer { margin-top:0;}
        #page_status .header { display:none; }

        /* member */
        .member {width:25%;font-size:0.6em;}

  }
  /* small displays   --------------------------------------------------- */
  @media only screen and (max-width: 550px) { 
        body, table { font-size:16px; }
        #nav {position:static;font-size:24px;}
        #ini-logo {position:absolute;height:5em;}
        #nav a { display:block; border-top:1px solid #aaa;border-right:0;}
                .member {width:auto;float:none;overflow:hidden;font-size:1.1em;}
                .member.active {font-size:1.5em;height:auto;}
          .active .member_img { padding:0; float:none; }
          .active .member_img img { height:auto;width:100%; border:0; }
  }
  /* demo mode        --------------------------------------------------- */
  .demoOnly {display:none;}
  .demo .demoOnly {display:default;}
  .demo .noDemo {display:none;}
  body.demo, .demo table { font-size:56px; }
  body::-webkit-scrollbar{ display:none;}
  @media only screen and (min-width: 1200px) {
    .demo #nav { font-size:0.8em;}
    .demo #page_status b {font-size:0.8em;}
    .demo .qr_code { font-size:0.6em;}
  }
  /* store links      --------------------------------------------------- */
  .store_link {
    font-size:1.2em;
    border-top:1px solid gray;
    padding:0.4em;
    border-bottom:1px solid gray;
    /*background-color:#0a0;*/
    margin-top:2em;
    display:none;
  }
  .store_link img {height:1em;vertical-align:middle;}
  .store_link .android {
    
  }
  </style>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript">
</script>
  <script src="js/jquery.scrollTo-1.4.3.1-min.js" type="text/javascript">
</script>
  <script src="js/jquery.nav.js" type="text/javascript">
</script>
</head>

<body>
  <div id="nav"></div>

  <div class="store_link noDemo android">Native App verfügbar
 <a
 href="https://play.google.com/store/apps/details?id=net.kibotu.de.infoini.door">
   <img alt="Android app on Google Play"
          src="https://developer.android.com/images/brand/de_app_rgb_wo_45.png"
          />
          </a>
  </div>

  <div id="ini-logo">
    <a href="http://infoini.de"><img src="img/inilogo_140x140.png"></a>
  </div>

  <div class="page" id="page_status">
    <div class="header">
      <div class="content">
		  <h1>Status</h1>
      </div>
    </div>

    <div class="main">
      <div class="row" align="center">
        <b>Kaffee Füllstand</b>
      </div>

      <div class="row alt">
        <div class="cafe_bar" id="kanne1">
          <div class="bar">
              <div class="text"> ...  </div>
          </div>
        </div>
      </div>

      <div class="row alt">
        <div class="cafe_bar" id="kanne2">
          <div class="bar">
              <div class="text"> ...  </div>
          </div>
        </div>
      </div>

      <div class="main noDemo frame_tuer">
        <div class="row">
          <div id="tuer">
            Tür ...
          </div>
        </div>

        <div class="row alt">
		  <div class="content">
			  <a href="/api/raumplan.pdf">Raumplan.pdf</a>
		  </div>
        </div>

        <div class="row">
		  <div class="content">
            <a href="/api/zuendstoff.pdf">Zündstoff.pdf</a>
		  </div>
        </div>
      </div>

      <div class="row alt hdOnly qr_code" align="center">
        <img  src=
        "data:image/png;base64,%20iVBORw0KGgoAAAANSUhEUgAAANgAAADYCAIAAAAGQrq6AAAABnRSTlMA/gABAP1bbA07AAAD7klE%20QVR4nO3dQYpjORBAwfIw979yzQk0oCbVejIR2y7Md/uhRSJ9fX5/f3/gtn9uPwD8/AiRCCGSIEQS%20hEiCEEkQIgn/rv7h8/n8zef4Y6s56Onn352/rp5n9/lvfd8pq+e3IpIgRBKESIIQSRAiCUIkQYgk%20LOeIK7f2L+7OyabmbVPzwlte+b2siCQIkQQhkiBEEoRIghBJECIJ23PElan52dTca2o/3+nvtfuc%20U2q/lxWRBCGSIEQShEiCEEkQIglCJGFsjlizO986Pb+8NS98hRWRBCGSIEQShEiCEEkQIglCJOFr%2054grt84dmxf+PysiCUIkQYgkCJEEIZIgRBKESMLYHLE2J7t1Hnmlth+x9ntZEUkQIglCJEGIJAiR%20BCGSIEQStueItXtEdp2+77g2d3zl97IikiBEEoRIghBJECIJQiRBiCQs54i1/Wq7pt6P+Moc7vXf%20y4pIghBJECIJQiRBiCQIkQQhkrCcI07dd3z6/pKV03O1V+aUp/c1TvVgRSRBiCQIkQQhkiBEEoRI%20ghBJuPZ+xN050+nzwq+b+l5T88JdVkQShEiCEEkQIglCJEGIJAiRhOPnmm/NpXbtPk9tf+Rpp39H%20KyIJQiRBiCQIkQQhkiBEEoRIwth+xF1Tc7jT+/B21eajK6fnoLt/b0UkQYgkCJEEIZIgRBKESIIQ%20SRi7r3nqPPKt88u37nFeOT13PL0/0vsReZIQSRAiCUIkQYgkCJEEIZIwth/x9Nyudi/IrfcR1ng/%20Il9FiCQIkQQhkiBEEoRIghBJ2L6veeX0frupfZC31PYX1s5xWxFJECIJQiRBiCQIkQQhkiBEEj63%205m21OeWUW+eFV07v+5xiRSRBiCQIkQQhkiBEEoRIghBJOL4f8dY55al9crfuTandH7P7+e5Z4UlC%20JEGIJAiRBCGSIEQShEjCtf2Ip9X22+06/fy33h/pnhXShEiCEEkQIglCJEGIJAiRhLH9iLfU7h0+%20fV575da+zylWRBKESIIQSRAiCUIkQYgkCJGE7fuaX3+f4q17lld/f/q+k9Of41wzX0WIJAiRBCGS%20IEQShEiCEEnYniOu1OZhpz//1lzzlfcd7rIikiBEEoRIghBJECIJQiRBiCSMzRFfcWveWTsfXZtf%20WhFJECIJQiRBiCQIkQQhkiBEEr52jvjKfcort+6JnppHumeFJwmRBCGSIEQShEiCEEkQIgljc8Ta%20Pci159l1ev/ilKn/ZysiCUIkQYgkCJEEIZIgRBKESML2HPGVe5xr+/ZuuXVviv2IPEmIJAiRBCGS%20IEQShEiCEEn4vDIP47tZEUkQIglCJEGIJAiRBCGSIEQS/gMnD1r53HbJsQAAAABJRU5ErkJggg==">

        <div>
          http://infoini.de/webapp/
        </div>
      </div>
    </div>
  </div>

  <div class="page" id="page_donate">
    <div class="header">
      <div class="content">
		  <h1>Spenden</h1>
      </div>
    </div>

    <div class="main">
      <div class="row">
        <div class="content">
          <table width="100%">
            <tr>
              <td style="width:10em;">Kaffee</td>

              <td align="right">0,30€</td>
            </tr>

            <tr>
              <td style="width:10em;">Club Mate</td>

              <td align="right">1,00€</td>
            </tr>

            <tr>
              <td style="width:10em">YumYum</td>

              <td align="right">0,50€</td>
            </tr>

            <tr>
              <td>Kopie</td>

              <td align="right">0,05€</td>

              <td></td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="page" id="page_news">
    <div class="header">
      <div class="content">
		  <h1>News</h1>
      </div>
    </div>

    <div class="main">
      <div class="row">
        <div class="content" id="news"></div>
      </div>

      <div class="row alt noDemo" align="right">
		<div class="content">
			<a href="/redmine/projects/fsropen/news">Alle News</a>
		</div>
      </div>
    </div>
  </div>

  <div class="page" id="page_mensa">
    <div class="header">
      <div class="content">
		  <h1>Mensa</h1>
      </div>
    </div>

    <div class="main">
      <div class="row">
        <div id="speiseplan" class="content">
          Heute... <script type="text/javascript" src="http://www.studentenwerk-berlin.de/speiseplan/js/beuth/tag/kurz/0">
</script>
        </div>
      </div>
    </div>
  </div>

  <div class="page" id="page_members">
    <div class="header">
      <div class="content">
		  <h1>Mitglieder</h1>
      </div>
    </div>

    <div class="main">
      <div class="row">
        ..
      </div>
    </div>

    <div style="clear:both;"></div>
  </div>

  <!--
  <div class="page" id="page_vote">
    <div class="header">
      <div class="content">
          <h1>Wahlergebnisse</h1>
      </div>
    </div>

    <div class="main">
      <div class="row">
          Die Platzierung hat keine Auswirkungen auf die
          Ämterverteilung. 
      </div>
    </div>

    <div style="clear:both;"></div>
  </div>
  -->

  <div class="page footer">
	<div class="content">
		<p>Getestet mit Firefox 18, Chromium 24, Nokia N9, Android 2.3

		Wenn Anpassungen für weitere Geräte nötig sind, meldet euch bei einem der Mitlgieder im <a href="http://infoini.de/redmine/projects/webapp">Projekt</a>
		Native Apps könnem mit der <a href="/api/">API</a> entwickelt werden.</p>
	</div>
  </div>
  <!-- included script for faster loading -->
  <script type="text/javascript">
// jQuery addon
  ///////////////////////////////////////////////////////////////////////////////

  // source: http://upshots.org/javascript/jquery-test-if-element-is-in-viewport-visible-on-screen
  $.fn.isOnScreen = function(){
    var win = $(window);
     
    var viewport = {
        top : win.scrollTop(),
        left : win.scrollLeft()
    };
    viewport.right = viewport.left + win.width();
    viewport.bottom = viewport.top + win.height();
     
    var bounds = this.offset();
    bounds.right = bounds.left + this.outerWidth();
    bounds.bottom = bounds.top + this.outerHeight();
     
    return (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));
  };


  // handler
  ///////////////////////////////////////////////////////////////////////////////
  var ajax_handler = {
        status: function(data,textStatus) {
            var setLevel = function(bar, level)  {
                    var percent=level+'%'
                    bar.find('.text').text(percent);
                    bar.find('.bar').animate({'width':percent},600);

            };
            var setTuer = function(open)  {
                    var t = $('#tuer');
                    t.removeClass((!open)?'open':'closed');
                    t.addClass(open?'open':'closed');
                    t.text('Tür '+ (open?'offen':'geschlossen'));
            };

            setTuer(data.status == "OPEN");
            setLevel($('#kanne1'),data.pots[0].level || 0);
            setLevel($('#kanne2'),data.pots[1].level || 0);
        },
        members: function(data,textStatus) {
            var $container = $('#page_members .main');
            $container.html("");
            $(data.members).each(function(i,d) {
                    var content = ''
                            +'<div class="member_img"><img src="'+d.photo_url+'"/><\/div>'
                            +'<div class="member_name"><a name="#">'+d.firstname+' '+d.lastname+'<\/a><\/div>'
                            +'<div class="member_position">'+d.position+'<\/div>'
                            +'<div class="member_mail">✉ '+d.email+'<\/div>'
                            +'<div class="member_course">'+d.course_of_study+'<\/div>'
                            ;

                    var member = $('<div class="row member '+((i%2==0)?'alt':'')+'">' + content + '<\/div>');
                    member.click(function() {
                            $('.member').removeClass('active');
                            member.addClass('active');      
                    });
                    $container.append(member);
            });
        },
        error: function(jqXHR, textStatus, errorThrown) {
                console.log('error: '+errorThrown);
        },
        /*
        vote: function(data,textStatus) {
            var $container = $('#page_vote .main');
            //$container.html("");
            $(data.members).each(function(i,d) {
                    var content = ''
                            +'<div class="member_img"><img src="'+d.photo_url+'"/><\/div>'
                            +'<div class="member_name"><a name="#">'+d.firstname+' '+d.lastname+'<\/a><\/div>'
                            +'<div class="member_comment">'+d.comment+'<\/div>'
                            +'<div class="member_mail">✉ '+d.email+'<\/div>'
                            +'<div class="member_course">'+d.course_of_study+'<\/div>'
                            ;

                    var member = $('<div class="row member '+((i%2==0)?'alt':'')+'">' + content + '<\/div>');
                    member.click(function() {
                            $('.member').removeClass('active');
                            member.addClass('active');      
                    });
                    $container.append(member);
            });
        },
        */
        news: function(data,textStatus) {
                var items = [];
                var $xml = $(data);
                $xml.find("entry").each(function() {
                        var $this = $(this),
                                item = {
                                        title: $this.find("title").text(),
                                        link: $this.find("link").attr('href'),
                                        content: $this.find("content").text(),
                                        updated: $this.find("updated").text(),
                                        author: $this.find("author>name").text()
                        }
                        items.push(item);
                });

                $('#news').html('');
                for(var i in items) {
                        var title = '<h2>'+items[i].title+'<\/h2>';
                        var content = '<p>'+items[i].content+'<\/p>';
                        var newsitem = '<div>'+title + content+'<\/div>';
                        $('#news').append(newsitem);
                        if(i==0) break; // only one item for now
                }
        }
  };

  var lazy_members_loaded = false;
  var handler_lazy_members = function() {
        if($('#page_members').isOnScreen() && !lazy_members_loaded) {
                $.ajax('http://infoini.de/api/members.json',{'success':ajax_handler.members});
                lazy_members_loaded = true;
        }
  };
  /*
  var lazy_vote_loaded = false;
  var handler_lazy_vote = function() {
        if($('#page_vote').isOnScreen() && !lazy_vote_loaded) {
                $.ajax('http://infoini.de/api/vote.json',{'success':ajax_handler.vote});
                lazy_vote_loaded = true;
        }
  };
  */

  // main 
  ///////////////////////////////////////////////////////////////////////////////
  $(document).ready(function() {
        var demo =window.location.search == '?demo';

        // load members only if they become visible
        $(window).scroll(handler_lazy_members);
        $(window).resize(handler_lazy_members);
        //$(window).scroll(handler_lazy_vote);
        //$(window).resize(handler_lazy_vote);

    var update = function() {
            $.ajax('http://infoini.de/api/combined.json',{success:ajax_handler.status,cache:false,ifModified:false} );
    };
    var UPDATE_INTERVAL = 60 * 1000;

    var updateSlow = function() {
            $.get('http://infoini.de/redmine/projects/fsropen/news.atom',{}, ajax_handler.news);
    };
    var UPDATE_INTERVAL_SLOW = 60 * 1000;


    // scroll through pages if called with ?demo
    if(demo) {
            // increase update freq
            UPDATE_INTERVAL = 5 * 1000;

            // hide scrollbars, handle scrolling
            //$('body').addClass('demo'); //.css('overflow','hidden');

            // hide irelevant content
            $('.noDemo').hide();
            //$('.demoOnly').show();
            setTimeout(location.reload, 4*60*60*1000);
    }



    // navigation
    $('.page:has(.header:visible):visible').each(function(i) {
            var text = $(this).find('.header').text();
            var o = $('<a href="#'+$(this).attr('id')+'">'+text+'<\/a>');
            $('#nav').append(o);
    });
    $('#nav').onePageNav({    scrollOffset: 40, scrollOffset: 300 });
    $('.page .header h1').each(function(i) {
            var up = $('<a href="#" class="up">↥<\/a>');
            $(this).prepend(up);
            up.click(function(e) {
                    e.preventDefault();
                    $.scrollTo(0,600);
            });
    });

        var navLinkCurrent = 1;
        //var navLinks = $('#nav a:visible').get();
        var navLinks = $('.page:has(.header:visible):visible').get();
         var slide = function() {
                        //navLinks[navLinkCurrent].click();       
                 $.scrollTo(navLinks[navLinkCurrent],600);
                        navLinkCurrent++;
                        navLinkCurrent%=navLinks.length;
        }
        if(demo) window.setInterval(slide,20*1000);

    // refresh
    update();
    setInterval(update,UPDATE_INTERVAL);
    updateSlow();
    setInterval(updateSlow,UPDATE_INTERVAL_SLOW);

    // show store link on android
    if(navigator.userAgent.toLowerCase().indexOf("android") > -1 ) {
        $('.store_link.android').show();
    }
  });
  </script>
</body>
</html>
